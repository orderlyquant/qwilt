{
  "hash": "1d9831700b044f43b5ac9f7896127359",
  "result": {
    "markdown": "---\ntitle: \"Understanding pull requests\"\ndescription: |\n  An attempt to get my head around pull requests based on the\n  fork and clone model as implemented in the `usethis` package.\nauthor: Brandon Farr\ndate: 02-10-2021\ncategories: ['usethis', 'git']\n---\n\n\n\"Fork and clone\" is the basis for issuing the \"pull requests\" that are the lifeblood of open source development on github in the R universe. The purpose of this [What I Learned Today](https://orderlyquant.github.io/wilting/) post is to understand this workflow from two levels:\n\n1.  the git/github concepts\n2.  the `usethis` helper functions\n\nGood reference information is found [here](https://usethis.r-lib.org/articles/articles/pr-functions.html).\n\n## Fork and clone\n\nTo begin a \"fork and clone\" within the \"happygitwithr\" / `usethis` recommended workflow, run:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nusethis::create_from_github(\"OWNER/REPO\", \"local_dir\", fork = TRUE)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](images/fork-and-clone.png){width=273}\n:::\n:::\n\n\nThis accomplishes three things:\n\n1.  A special copy, a **fork**, of `OWNER/REPO` is made to your github account, referred to herein as `YOU/REPO`.\n\n2.  `YOU/REPO` is **cloned** to `local_dir` on your computer.\n\n3.  git \"remotes\" are setup as follows:\n\n    -   *origin*: `YOU/REPO`, can *push* and *pull*\n    -   *upstream*: `OWNER/REPO`, can *pull*, can't *push*\n\nBest \"pull request\" practices dictate working on a local branch in order to avoid local merge conflicts and to ease the merge process for `OWNER` once the \"pull request\" is issued. To establish a local branch on which to do your work, run:\n\n\n::: {.cell}\n\n:::\n\n\nThis creates and switches to a local development branch, `local/dev_branch`, that is separate from the `local/main` branch. The allows your local repo to incorporate changes in `upstream`, i.e. keep up-to-date with development in `OWNER/REPO` while you develop locally.\n\n\n\n## Develop\n\n### Local development\n\nDevelop as usual, committing to `local/dev_branch` as appropriate via git tools included with Rstudio.\n\n### Keeping up with OWNER\n\nAs necessary, and certainly recommended prior to issuing a \"pull request\", pull down any changes happening on `upstream/main` by running:\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](images/merge-main.png){width=273}\n:::\n:::\n\n\nThis brings `local/main` up-to-date with all development on `upstream/main`. This should happen without any issue if you haven't touched `local/main`, because that is where the updates are pulled to.\n\n*My current understanding is that this doesn't perform any merge analysis between* `local/main` *and* `local/dev_branch`.\n\n## Create pull request\n\nWhen you are ready to make the pull request, run the following:\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](images/pr-push.png){width=273}\n:::\n:::\n\n\nThis accomplishes the following:\n\n- pushes your changes to your forked repo, `YOU/REPO`\n- launches a browser window with the github page of `OWNER/REPO`\n- makes available the \"pull request\" option within github\n\nAt this point, you work with submitting the pull request on github. For the purposes of this post, assume the pull request is accepted by `OWNER`. You finish the pull request locally by running:\n\n\n\n::: {.cell}\n\n:::\n\n\nThis once again brings `local/main` up-to-date with `upstream/main`, which\nnow includes the changes incorporated in the accepted pull request. It\nalso has the effect of switching back to the default branch, `main` and\ndeleting the development branch `dev_branch`.\n\nTo make sure `OWNER/REPO` receives the changes of the merged pull request, in a shell run:\n\n\n::: {.cell}\n\n:::\n\n\n## Summary\n\n\n::: {.cell}\n\n:::\n\n\n\n\n## Notes\n\n- Called a \"pull request\", because at the end of the day, `YOU` are\n  asking `OWNER` to pull your changes into the `OWNER/REPO`.\n- \"formal\" names, like `OWNER/REPO` and \"aliases\" like `upstream` have\n  been used interchangeably (sloppily?) to reinforce the concept that\n  \"aliases\" are useful shorthand for \"formal\" names\n- My sense is that the **fork**ed copy that sits in `YOU` is there\n  largely for the purpose of being the basis of the pull request. In\n  the documented `usethis` workflow, `pr_push()` is the only time that\n  `YOU/REPO` gets updated during development of the pull request.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}